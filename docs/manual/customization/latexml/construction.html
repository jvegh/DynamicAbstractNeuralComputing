<!DOCTYPE html><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>4.1.3 Construction‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual</title>
<!--Generated on Tue Dec 17 10:04:54 2024 by LaTeXML (version 0.8.6) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on December 17, 2024.-->

<link rel="shortcut icon" href="../../../favicon.ico" type="image/png">
<link rel="stylesheet" href="../../../LaTeXML.css" type="text/css">
<link rel="stylesheet" href="../../../ltx-book.css" type="text/css">
<link rel="stylesheet" href="../../../ltx-listings.css" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="../../../latexmldoc.css" type="text/css">
<script src="../../../LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="./" title="§ 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="up up" href="../" title="Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="up up up" href="../../" title="LaTeXML The Manual">
<link rel="start" href="../../" title="LaTeXML The Manual">
<link rel="prev" href="digestion.html" title="§ 4.1.2 Digestion &amp; Primitives ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="next" href="schema.html" title="§ 4.1.4 Document Model ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="subsection" href="expansion.html" title="§ 4.1.1 Expansion &amp; Macros ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="subsection" href="digestion.html" title="§ 4.1.2 Digestion &amp; Primitives ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="subsection" href="schema.html" title="§ 4.1.4 Document Model ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="subsection" href="rewriting.html" title="§ 4.1.5 Rewriting ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="subsection" href="packages.html" title="§ 4.1.6 Packages and Options ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="subsection" href="misc.html" title="§ 4.1.7 Miscellaneous ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="section" href="./" title="§ 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="section" href="../latexmlpost/" title="§ 4.2 latexmlpost Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="chapter" href="../../intro/" title="Chapter 1 Introduction ‣ LaTeXML The Manual">
<link rel="chapter" href="../../usage/" title="Chapter 2 Using LaTeXML ‣ LaTeXML The Manual">
<link rel="chapter" href="../../architecture/" title="Chapter 3 Architecture ‣ LaTeXML The Manual">
<link rel="chapter" href="../" title="Chapter 4 Customization ‣ LaTeXML The Manual">
<link rel="chapter" href="../../math/" title="Chapter 5 Mathematics ‣ LaTeXML The Manual">
<link rel="chapter" href="../../localization/" title="Chapter 6 Localization ‣ LaTeXML The Manual">
<link rel="chapter" href="../../alignments/" title="Chapter 7 Alignments ‣ LaTeXML The Manual">
<link rel="chapter" href="../../metadata/" title="Chapter 8 Metadata ‣ LaTeXML The Manual">
<link rel="chapter" href="../../todo/" title="Chapter 9 ToDo ‣ LaTeXML The Manual">
<link rel="chapter" href="../../acknowledgements/" title="Acknowledgements ‣ LaTeXML The Manual">
<link rel="appendix" href="../../commands/" title="Appendix A Command Documentation ‣ LaTeXML The Manual">
<link rel="appendix" href="../../included.bindings/" title="Appendix B Implemented Bindings ‣ LaTeXML The Manual">
<link rel="appendix" href="../../schema/" title="Appendix C LaTeXML Schema ‣ LaTeXML The Manual">
<link rel="appendix" href="../../errorcodes/" title="Appendix D Error Codes ‣ LaTeXML The Manual">
<link rel="appendix" href="../../cssclasses/" title="Appendix E CSS Classes ‣ LaTeXML The Manual">
<link rel="index" href="../../idx.html" title="Index ‣ LaTeXML The Manual">
</head>
<body>
<nav class="ltx_page_navbar">
<div class="ltx_para">
<p class="ltx_p"><a href="../../" title="LaTeXML The Manual" class="ltx_ref"><img src="x1.png" class="ltx_graphics" width="215" height="50" alt=""></a>
<br class="ltx_break"><img src="x2.png" class="ltx_graphics" width="130" height="168" alt="">
<br class="ltx_break"></p>
</div>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../intro/" title="Chapter 1 Introduction ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../usage/" title="Chapter 2 Using LaTeXML ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Using <span class="ltx_ref ltx_font_typewriter">LaTeXML</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../architecture/" title="Chapter 3 Architecture ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Architecture</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter">
<a href="../" title="Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Customization</span></a>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section">
<a href="./" title="§ 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>LaTeXML Customization</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="expansion.html" title="§ 4.1.1 Expansion &amp; Macros ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.1 </span>Expansion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="digestion.html" title="§ 4.1.2 Digestion &amp; Primitives ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.2 </span>Digestion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.3 </span>Construction</span></span>
<ul class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a href="#SSS0.Px1" title="DefConstructor($prototype,$replacement,%options) ‣ § 4.1.3 Construction &amp; Constructors ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title">DefConstructor</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a href="#SSS0.Px2" title="DefEnvironment($prototype,$replacement,%options) ‣ § 4.1.3 Construction &amp; Constructors ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title">DefEnvironment</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="schema.html" title="§ 4.1.4 Document Model ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.4 </span>Document Model</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="rewriting.html" title="§ 4.1.5 Rewriting ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.5 </span>Rewriting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="packages.html" title="§ 4.1.6 Packages and Options ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.6 </span>Packages and Options</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="misc.html" title="§ 4.1.7 Miscellaneous ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.7 </span>Miscellaneous</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="../latexmlpost/" title="§ 4.2 latexmlpost Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>latexmlpost Customization</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../math/" title="Chapter 5 Mathematics ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Mathematics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../localization/" title="Chapter 6 Localization ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Localization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../alignments/" title="Chapter 7 Alignments ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Alignments</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../metadata/" title="Chapter 8 Metadata ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Metadata</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../todo/" title="Chapter 9 ToDo ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>ToDo</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="../../acknowledgements/" title="Acknowledgements ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title">Acknowledgements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="../../commands/" title="Appendix A Command Documentation ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Commands</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="../../included.bindings/" title="Appendix B Implemented Bindings ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Bindings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="../../schema/" title="Appendix C LaTeXML Schema ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Schema</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="../../errorcodes/" title="Appendix D Error Codes ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Error Codes</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="../../cssclasses/" title="Appendix E CSS Classes ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>CSS Classes</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="../../idx.html" title="Index ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div></nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="./" title="§ 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>LaTeXML Customization</span></a><a href="digestion.html" title="§ 4.1.2 Digestion &amp; Primitives ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.2 </span>Digestion</span></a><a href="schema.html" title="§ 4.1.4 Document Model ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.4 </span>Document Model</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_subsection ltx_authors_1line">
<h1 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">§ 4.1.3 </span>Construction &amp; Constructors</h1>

<div id="p1" class="ltx_para">
<p class="ltx_p">Constructors are where things get interesting, but also complex; they are
responsible for defining how the <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> is built. There are basic
constructors corresponding to normal control sequences, as well as
environments. Mathematics generally comes down to constructors, as well,
but is covered in Chapter <a href="../../math/" title="Chapter 5 Mathematics ‣ LaTeXML The Manual" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">Here are a couple of trivial examples of constructors:</p>
<div class="ltx_listing ltx_lst_language_Perl ltx_lstlisting ltx_listing">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBEZWZDb25zdHJ1Y3RvcignXGVtcGh7fScsCiAgICI8bHR4OmVtcGg+IzE8L2x0eDplbXBoPiIsIG1vZGU9Pid0ZXh0Jyk7CiAgRGVmQ29uc3RydWN0b3IoJ1xpdGVtW10nLAogICAgIjxsdHg6aXRlbT4/IzEoPGx0eDp0YWc+IzE8L2x0eDp0YWc+KSIpOwogIERlZkVudmlyb25tZW50KCd7cXVvdGV9JywKICAgICc8bHR4OnF1b3RlPiNib2R5PC9sdHg6cXVvdGU+Jyk7CiAgRGVmQ29uc3RydWN0b3IoJ1xmb290bm90ZVtde30nLAogICAgIjxsdHg6bm90ZSBjbGFzcz0nZm9vdG5vdGUnIG1hcms9JyNyZWZudW0nPiMyPC9sdHg6bm90ZT4iLAogICAgbW9kZT0+J3RleHQnLAogICAgcHJvcGVydGllcz0+IHN1YiB7CiAgICAgICgkX1sxXSA/IChyZWZudW09PiRfWzFdKSA6IFJlZlN0ZXBDb3VudGVyKCdmb290bm90ZScpKSB9KTs=" download="">⬇</a></div>
<div id="lstnumberx103" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">DefConstructor</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’\emph{}’</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx104" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">   </span><span class="ltx_text ltx_lst_string ltx_font_typewriter">"&lt;ltx:emph&gt;#1&lt;/ltx:emph&gt;"</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">mode</span><span class="ltx_text ltx_font_typewriter">=&gt;</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’text’</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx105" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">DefConstructor</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’\item[]’</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx106" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_string ltx_font_typewriter">"&lt;ltx:item&gt;?#1(&lt;ltx:tag&gt;#1&lt;/ltx:tag&gt;)"</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx107" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">DefEnvironment</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’{quote}’</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx108" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’&lt;ltx:quote&gt;#body&lt;/ltx:quote&gt;’</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx109" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">DefConstructor</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’\footnote[]{}’</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx110" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_string ltx_font_typewriter">"&lt;ltx:note<span class="ltx_text ltx_lst_space">␣</span>class=’footnote’<span class="ltx_text ltx_lst_space">␣</span>mark=’#refnum’&gt;#2&lt;/ltx:note&gt;"</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx111" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">mode</span><span class="ltx_text ltx_font_typewriter">=&gt;</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’text’</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx112" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">properties</span><span class="ltx_text ltx_font_typewriter">=&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">sub</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span>
</div>
<div id="lstnumberx113" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">$_</span><span class="ltx_text ltx_font_typewriter">[1]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">?</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">refnum</span><span class="ltx_text ltx_font_typewriter">=&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">$_</span><span class="ltx_text ltx_font_typewriter">[1])</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">RefStepCounter</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_string ltx_font_typewriter">’footnote’</span><span class="ltx_text ltx_font_typewriter">))</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">});</span>
</div>
</div>
</div>
<section id="SSS0.Px1" class="ltx_paragraph">
<h2 class="ltx_title ltx_font_typewriter ltx_title_paragraph">DefConstructor(<span class="ltx_text ltx_font_italic">$prototype</span>,<span class="ltx_text ltx_font_italic">$replacement</span>,<span class="ltx_text ltx_font_italic">%options</span>)</h2>

<div id="SSS0.Px1.p1" class="ltx_para">
<p class="ltx_p">Creates a constructor control sequence, where <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$replacement</span> describes the <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> to be generated during the construction phase. It can either be a string
representing the <em class="ltx_emph ltx_font_italic">XML pattern</em> (described below), or a
subroutine <span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">CODE</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$document</span>,<span class="ltx_text ltx_lst_identifier">$arg1</span>,...<span class="ltx_text ltx_font_italic" style="font-size:90%;">props)</span></span></span>
receiving the arguments and properties from the <span class="ltx_ref ltx_missing_label ltx_ref_self">Whatsit</span>;
it would invoke the methods of <span class="ltx_ref ltx_missing_label ltx_ref_self">Document</span> to construct the desired <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a>.
</p>
</div>
<div id="SSS0.Px1.p2" class="ltx_para">
<p class="ltx_p">At its simplest, the XML pattern is a just serialization of the desired <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a>.
For more expressivity, <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> trees, text content, attributes and attribute values can
be effectively ‘interpolated’ into the <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> being constructed by use of the following expressions:</p>
<ul id="Ch4.S1.I6" class="ltx_itemize">
<li id="Ch4.S1.I6.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I6.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_comment ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter ltx_font_italic">#1</span>,<span class="ltx_text ltx_lst_comment ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter ltx_font_italic">#2</span>,…<span class="ltx_text ltx_lst_comment ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter ltx_font_italic">#%name%</span>
returns the construction of the numbered argument
or named property of the Whatsit;</p>
</div>
</li>
<li id="Ch4.S1.I6.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I6.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">&amp;<span class="ltx_text ltx_font_italic" style="font-size:90%;">function</span>(<span class="ltx_text ltx_font_italic" style="font-size:90%;">arg1</span>,<span class="ltx_text ltx_font_italic" style="font-size:90%;">arg2</span>,...)</span>
invokes the Perl <span class="ltx_text ltx_font_typewriter ltx_font_italic">function</span> on the given arguments,
<span class="ltx_text ltx_font_typewriter ltx_font_italic">arg1</span>,…, returning the result.
The arguments should be expressions for values, rather than <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> subtrees.</p>
</div>
</li>
<li id="Ch4.S1.I6.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I6.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">?<span class="ltx_text ltx_font_italic" style="font-size:90%;">test</span>(<span class="ltx_text ltx_font_italic" style="font-size:90%;">if<span class="ltx_text ltx_lst_space"> </span>pattern</span>)</span>
or <span class="ltx_text ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">?<span class="ltx_text ltx_font_italic" style="font-size:90%;">test</span>(<span class="ltx_text ltx_font_italic" style="font-size:90%;">if<span class="ltx_text ltx_lst_space"> </span>pattern</span>)(<span class="ltx_text ltx_font_italic" style="font-size:90%;">else<span class="ltx_text ltx_lst_space"> </span>pattern</span>)</span>
returns the result of either the <span class="ltx_text ltx_font_typewriter ltx_font_italic">if</span> or <span class="ltx_text ltx_font_typewriter ltx_font_italic">else</span> pattern
depending on whether the result of <span class="ltx_text ltx_font_typewriter ltx_font_italic">test</span> (typically also an expression) is non-empty;</p>
</div>
</li>
<li id="Ch4.S1.I6.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I6.i4.p1" class="ltx_para">
<p class="ltx_p"><code class="ltx_verbatim ltx_font_typewriter">%</code><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter ltx_font_italic" style="font-size:90%;">expression</span>
returns a hash (or rather assumes the result is a hash or KeyVals object);
this is only allowed within an opening <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> tag, where all the key-value pairs are
inserted as attributes;</p>
</div>
</li>
<li id="Ch4.S1.I6.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I6.i5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">^</span>
if this appears at the beginning of the pattern,
the replacement is allowed to <em class="ltx_emph ltx_font_italic">float</em> up the current tree to whereever it might be allowed;</p>
</div>
</li>
</ul>
<p class="ltx_p">In each case, the result of an expression is expected to be either an <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> tree,
a string or a hash, depending on the context it was used in. In particular,
values of attributes are typically given by quoted strings, but expressions within those
strings are interpolated into the computed attribute value.
The special characters <code class="ltx_verbatim ltx_font_typewriter">@ # ? %</code> which introduce these expressions can
be escaped by preceding with a backslash, when the literal character is desired.</p>
</div>
<div id="SSS0.Px1.p3" class="ltx_para">
<p class="ltx_p">A subroutine used as the <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$replacement</span>, allows programmatic insertion of <a href="http://www.w3.org/XML/" title="" class="ltx_ref ltx_font_typewriter">XML</a> into, or modification of, the document being constructed.
Although one could use LibXML’s DOM API to manipulate the document tree,
it is <em class="ltx_emph ltx_font_italic">strongly</em> recommended to use <span class="ltx_ref ltx_missing_label ltx_ref_self">Document</span>’s API whereever possible
as it maintains consistency and manages namespace prefixes.
This is particularly true for insertion of new content, setting attributes and
finding existing nodes in the tree using XPath.</p>
</div>
<div id="SSS0.Px1.p4" class="ltx_para">
<p class="ltx_p">Options:</p>
<ul id="Ch4.S1.I7" class="ltx_itemize">
<li id="Ch4.S1.I7.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">mode</span><span class="ltx_text ltx_font_typewriter">=&gt;(<span class="ltx_text ltx_lst_string">’math’</span>|<span class="ltx_text ltx_lst_string">’text’</span>)</span></span> switches to math or text mode, if needed;</p>
</div>
</li>
<li id="Ch4.S1.I7.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">requireMath</span><span class="ltx_text ltx_font_typewriter">=&gt;1</span></span>, <span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">forbidMath</span><span class="ltx_text ltx_font_typewriter">=&gt;1</span></span> requires, or forbids,
this constructor to appear in math mode;</p>
</div>
</li>
<li id="Ch4.S1.I7.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">bounded</span><span class="ltx_text ltx_font_typewriter">=&gt;1</span></span> specifies that all digestion (of arguments and daemons)
will take place within an implicit TeX group, so that any side-effects
are localized, rather than affecting the global state;</p>
</div>
</li>
<li id="Ch4.S1.I7.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">font</span><span class="ltx_text ltx_font_typewriter">=&gt;{<span class="ltx_text ltx_font_italic" style="font-size:90%;">hash}</span></span></span>
switches the font used for any created text;
recognized font keys are <span class="ltx_text ltx_font_typewriter">family</span>, <span class="ltx_text ltx_font_typewriter">series</span>, <span class="ltx_text ltx_font_typewriter">shape</span>, <span class="ltx_text ltx_font_typewriter">size</span>,
<span class="ltx_text ltx_font_typewriter">color</span>;</p>
</div>
</li>
<li id="Ch4.S1.I7.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">properties</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_space"> </span>{<span class="ltx_text ltx_font_italic" style="font-size:90%;">hash}<span class="ltx_text ltx_lst_space"> </span>|<span class="ltx_text ltx_lst_space"> </span>CODE($stomach,$arg1,</span></span></span>..).
provides a set of properties to store in the <span class="ltx_ref ltx_missing_label ltx_ref_self">Whatsit</span> for eventual use
in the constructor <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$replacement</span>. If a subroutine is used,
it also should return a hash of properties;</p>
</div>
</li>
<li id="Ch4.S1.I7.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i6.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">beforeDigest</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">CODE</span>(<span class="ltx_text ltx_lst_identifier">$stomach</span>)</span></span>,
<br class="ltx_break"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">afterDigest</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">CODE</span>(<span class="ltx_text ltx_lst_identifier">$stomach</span>,<span class="ltx_text ltx_lst_identifier">$whatsit</span>)</span></span>
provides code to be digested before and after digesting the arguments of
the constructor, typically to alter the context of the digestion (before),
or to augment the properties of the <span class="ltx_ref ltx_missing_label ltx_ref_self">Whatsit</span> (after);</p>
</div>
</li>
<li id="Ch4.S1.I7.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i7.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">beforeConstruct</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">CODE</span>(<span class="ltx_text ltx_lst_identifier">$document</span>,<span class="ltx_text ltx_lst_identifier">$whatsit</span>)</span></span>,
<br class="ltx_break"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">afterConstruct</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">CODE</span>(<span class="ltx_text ltx_lst_identifier">$document</span>,<span class="ltx_text ltx_lst_identifier">$whatsit</span>)</span></span>
provides code to be run before and after the main <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$replacement</span>
is effected; occassionaly it is convenient to use the pattern
form for the main <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$replacement</span>, but one still wants to execute
a bit of Perl code, as well;
</p>
</div>
</li>
<li id="Ch4.S1.I7.i8" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i8.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">captureBody</span><span class="ltx_text ltx_font_typewriter">=&gt;(1<span class="ltx_text ltx_lst_space"> </span>|<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">$token</span>)</span></span>
specifies that an additional argument (like an environment body) wiil
be read until the current TeX grouping ends, or until the specified <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$token</span>
is encountered. This argument is available to <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$replacement</span> as <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$body</span>;</p>
</div>
</li>
<li id="Ch4.S1.I7.i9" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i9.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">scope</span><span class="ltx_text ltx_font_typewriter">=&gt;(<span class="ltx_text ltx_lst_string">’global’</span>|<span class="ltx_text ltx_lst_string">’local’</span>|<span class="ltx_text ltx_lst_identifier">$name</span>)</span></span> specifies whether this
definition is made globally, or in the current stack frame (default),
(or in a named scope);</p>
</div>
</li>
<li id="Ch4.S1.I7.i10" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I7.i10.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reversion</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">$string</span>|<span class="ltx_text ltx_lst_identifier">CODE</span>(...)</span></span>,
<span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">alias</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">$cs</span></span></span>
can be used when the <span class="ltx_ref ltx_missing_label ltx_ref_self">Whatsit</span> needs to be reverted into TeX code,
and the default of simply reassembling based on the prototype is not desired.
See the code for examples.</p>
</div>
</li>
</ul>
</div>
<div id="SSS0.Px1.p5" class="ltx_para">
<p class="ltx_p">Some additional functions useful when writing constructors:</p>
<ul id="Ch4.S1.I8" class="ltx_itemize">
<li id="Ch4.S1.I8.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I8.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">ToString</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$stuff</span>)</span></span> converts <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$stuff</span> to a string,
hopefully without TeX markup, suitable for use as document content
and attribute values. Note that if <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$stuff</span> contains Whatsits
generated by Constructors, it may not be possible to avoid TeX code.
Constrast <span class="ltx_text ltx_lst_keyword ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter ltx_font_bold">ToString</span> to the following two functions.</p>
</div>
</li>
<li id="Ch4.S1.I8.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I8.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">UnTeX</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$stuff</span>)</span></span> returns a string containing the TeX code
that would generate <span class="ltx_text ltx_lst_identifier ltx_lst_language_Perl ltx_lstlisting ltx_font_typewriter">$stuff</span> (this might not be the original TeX).
The function <span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Revert</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$stuff</span>)</span></span> returns the same information as a Tokens list.</p>
</div>
</li>
<li id="Ch4.S1.I8.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I8.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">Stringify</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$stuff</span>)</span></span> returns a string more intended
for debugging purposes; it reveals more of the structure and type information
of the object and its parts.</p>
</div>
</li>
<li id="Ch4.S1.I8.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I8.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">CleanLabel</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$arg</span>)</span></span>,
<span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">CleanIndexKey</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$arg</span>)</span></span>,
<span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">CleanBibKey</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$arg</span>)</span></span>, 
<br class="ltx_break"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">CleanURL</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$arg</span>)</span></span>
cleans up arguments (converting to string, handling invalid characters, etc)
to make the argument appropriate for use as an attribute representing
a label, index ID, etc.</p>
</div>
</li>
<li id="Ch4.S1.I8.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I8.i5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold">UTF</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">$hex</span>)</span></span> returns the Unicode character for the given
codepoint; this is useful for characters below <span class="ltx_text ltx_font_typewriter">0x100</span> where
Perl becomes confused about the encoding.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="SSS0.Px2" class="ltx_paragraph">
<h2 class="ltx_title ltx_font_italic ltx_title_paragraph">DefEnvironment($prototype,$replacement,%options)</h2>

<div id="SSS0.Px2.p1" class="ltx_para">
<p class="ltx_p">Environments are largely a special case of constructors,
but the prototype starts with <code class="ltx_verbatim ltx_font_typewriter">{envname}</code>, rather than <code class="ltx_verbatim ltx_font_typewriter">\cmd</code>,
the replacement will also typically involve <code class="ltx_verbatim ltx_font_typewriter">#body</code> representing
the contents of the environment.</p>
</div>
<div id="SSS0.Px2.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">DefEnvironment</span> takes the same options as <span class="ltx_text ltx_font_typewriter">DefConstructor</span>,
with the addition of</p>
<ul id="Ch4.S1.I9" class="ltx_itemize">
<li id="Ch4.S1.I9.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I9.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">afterDigestBegin</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">CODE</span>(<span class="ltx_text ltx_lst_identifier">$stomach</span>,<span class="ltx_text ltx_lst_identifier">$whatsit</span>)</span></span>
provides code to digest after the <code class="ltx_verbatim ltx_font_typewriter">\begin{env}</code> is digested;</p>
</div>
</li>
<li id="Ch4.S1.I9.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch4.S1.I9.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_Perl ltx_lstlisting"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">beforeDigestEnd</span><span class="ltx_text ltx_font_typewriter">=&gt;<span class="ltx_text ltx_lst_identifier">CODE</span>(<span class="ltx_text ltx_lst_identifier">$stomach</span>)</span></span>
provides code to digest before the <code class="ltx_verbatim ltx_font_typewriter">\end{env}</code> is digested.</p>
</div>
</li>
</ul>
</div>
<div id="SSS0.Px2.p3" class="ltx_para">
<p class="ltx_p">For those cases where you do not want an environment to correspond
to a constructor, you may still (as in LaTeX), define the
two control sequences <code class="ltx_verbatim ltx_font_typewriter">\envname</code> and <code class="ltx_verbatim ltx_font_typewriter">\endenvname</code>
as you like.</p>
</div>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="digestion.html" title="§ 4.1.2 Digestion &amp; Primitives ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.2 </span>Digestion</span></a><a href="../../idx.html" title="Index ‣ LaTeXML The Manual" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a><a href="schema.html" title="§ 4.1.4 Document Model ‣ § 4.1 LaTeXML Customization ‣ Chapter 4 Customization ‣ LaTeXML The Manual" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.4 </span>Document Model</span></a>
</div>
<div class="ltx_page_logo">Generated  on Tue Dec 17 10:04:54 2024 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
